# 上交所披露信息获取工具

## 项目简介

作者：[李尚儒](https://github.com/lishuzheng01)

本项目是一个用于获取上海证券交易所（SSE）上市公司定期报告信息的工具，主要功能是批量获取指定股票或全部主板股票的年报信息，并将其整理为CSV格式的文件，方便后续分析和使用。

## 功能特点

1. **批量获取**：支持同时获取多只股票的年报信息
2. **灵活配置**：可自定义年份范围和股票列表
3. **数据去重**：自动去除重复的报告链接
4. **错误处理**：包含重试机制，提高数据获取成功率
5. **两种模式**：
   - 单文件模式：处理指定的股票代码列表
   - 批量模式：从CSV文件读取全部主板股票代码进行处理

## 环境要求

- Python 3.6+
- 依赖库：
  - requests
  - csv
  - time

## 安装方法

1. 克隆或下载本项目到本地
2. 安装所需依赖：

```bash
pip install requests
```

## 使用方法

### 1. 单文件模式（sse_links_downloader.py）

适用于需要获取特定几只股票的年报信息。

**使用步骤**：
1. 打开 `sse_links_downloader.py` 文件
2. 在 `CODES` 变量中设置需要查询的股票代码列表
3. 在 `START_YEAR` 和 `END_YEAR` 变量中设置年份范围
4. 运行脚本：

```bash
python sse_links_downloader.py
```

### 2. 批量模式（sse_links_mainboard_downloader.py）

适用于需要获取全部主板股票的年报信息。

**使用步骤**：
1. 确保 `mainboard_codes.csv` 文件包含最新的主板股票代码列表
2. 打开 `sse_links_mainboard_downloader.py` 文件
3. 在 `START_YEAR` 和 `END_YEAR` 变量中设置年份范围
4. 运行脚本：

```bash
python sse_links_mainboard_downloader.py
```

## 配置说明

### 通用配置

- `START_YEAR`：开始年份（闭区间）
- `END_YEAR`：结束年份（闭区间）
- `MAX_RETRIES`：请求失败时的最大重试次数

### 单文件模式特有配置

- `CODES`：需要查询的股票代码列表，格式如 `["600000", "600519", "601318"]`

### 批量模式特有配置

- `CODES_CSV`：包含主板股票代码的CSV文件名，默认为 `mainboard_codes.csv`

## 注意事项

1. **股票代码更新**：
   - 使用批量模式时，请确保 `mainboard_codes.csv` 文件及时更新，包含最新的股票列表
   - 每次运行前请检查是否有新股票上市或股票退市

2. **请求频率**：
   - 脚本已内置延迟机制，避免对服务器造成过大压力
   - 请勿随意修改延迟时间，以免被服务器限制访问

3. **数据来源**：
   - 数据来源于上海证券交易所官方网站
   - 本工具仅用于数据获取，不保证数据的完整性和准确性

4. **网络环境**：
   - 请确保网络环境稳定，避免在网络波动较大的情况下使用

## 文件说明

| 文件名 | 说明 |
|--------|------|
| sse_links_downloader.py | 单文件模式脚本，用于处理指定股票列表 |
| sse_links_mainboard_downloader.py | 批量模式脚本，用于处理全部主板股票 |
| mainboard_codes.csv | 主板股票代码列表CSV文件 |
| README.md | 项目说明文档 |
| summary_links_YYYY.csv | 单文件模式生成的年报信息汇总文件（YYYY为年份） |
| summary_mainboard_links_YYYY.csv | 批量模式生成的年报信息汇总文件（YYYY为年份） |

## 输出格式

脚本运行后，会生成以年份命名的CSV文件，包含以下字段：

- `code`：股票代码
- `title`：报告标题
- `date`：发布日期
- `url`：报告的PDF链接

## 更新日志

- 初始版本：实现基本的年报信息获取功能
- 新增批量模式：支持从CSV文件读取全部主板股票代码
- 优化错误处理：增加重试机制，提高数据获取成功率
- 数据去重：自动去除重复的报告链接

## 许可证

本项目仅供学习和研究使用，不得用于商业用途。
